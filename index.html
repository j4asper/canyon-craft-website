<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="index.css">
        <link href="https://fonts.cdnfonts.com/css/minecraft-4" rel="stylesheet">
        <link rel="icon" type="ico" href="images/favicon.ico">
        <title>Canyon Craft</title>
    </head>

    <body>
        <div id="headers">
            <h1>Canyon Craft</h1>
            <h2><span id="player-count" style="color: white;">0</span> Player(s) Online</h2>
        </div>

        <div id="content-bg">
            <div id="content">

                <p>
                    Discover Canyon Craft: The Ultimate Minecraft Adventure!<br>

                    ðŸŒŽ Dynamic Map, endless exploration! Visit map below.<br>

                    ðŸ”¥ Fully Community Driven: Shape the server's future with us.<br>

                    ðŸ”’ Whitelisted Server: Join our mature community. Ages under 18 considered if mature.<br>

                    ðŸŒŸ Limitless Adventure on Minecraft version 1.20!<br>

                    Join our <span style="color: #5865F2;"><a href="https://discord.gg/npaMqyDh8R" target="_blank">Discord Server</a></span> to get whitelisted and let the journey begin!
                </p>

            </div>
        </div>

        <div id="map">
            <a href="https://map.canyoncraft.net" target="_blank"><img src="images/map.png" alt="Minecraft Map Icon"></a>
        </div>

    </body>

    <script>
        // Source from https://cindr.org/how-to-get-a-minecraft-servers-player-count-motd-and-status-using-javascript/
        function initServerData(serverIp,serverPort){
            fetch('https://mcapi.us/server/status?ip='+serverIp+'&port='+serverPort)
            .then(response => response.json())
            .then(data => handleServerStatus(data));
      
            function handleServerStatus(data){
                if(data.status=='error'){
                    console.log(data.error);
                    return false;
                }
    
                const playerCounter = document.getElementById("player-count");
                playerCounter.innerHTML = data.players.now;
            } 
        }
        initServerData("canyoncraft.net","25565");
    </script>

</html>